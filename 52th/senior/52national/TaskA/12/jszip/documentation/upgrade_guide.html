<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Create .zip files using JavaScript. Provides a simple API to place any content generated by JavaScript into a .zip file for your users." />
    <title>Upgrade Guide</title>

    <!--
    Any version of jQuery will do (it's just to write some examples), this one
    happens to be available in our tests.
    -->
    <script type="text/javascript" src="../test/jquery-1.8.3.min.js"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="../vendor/bootstrap-3.1.1-dist/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="../vendor/bootstrap-3.1.1-dist/css/bootstrap-theme.min.css">

    <!-- Latest compiled and minified JavaScript -->
    <script src="../vendor/bootstrap-3.1.1-dist/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="../documentation/css/pygments.css">
    <link rel="stylesheet" href="../documentation/css/main.css">

    <script type="text/javascript" src="../dist/jszip.js"></script>

    <script type="text/javascript" src="../vendor/jszip-utils.js"></script>
    <!--
    Mandatory in IE 6, 7, 8 and 9.
    -->
    <!--[if IE]>
    <script type="text/javascript" src="../stuk.github.io/jszip-utils/dist/jszip-utils-ie.js"></script>
    <![endif]-->


    <script type="text/javascript" src="../vendor/FileSaver.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
          <div class="navbar-header">
            <a class="navbar-brand" href="../index.html"><strong>JS</strong>Zip</a>
          </div>
          <ul class="nav navbar-nav">
            <li >
              <a href="../documentation/api_jszip.html">API</a>
            </li>
            <li >
              <a href="../documentation/examples.html">How to / examples</a>
            </li>
            <li >
              <a href="../documentation/limitations.html">Performances / limitations</a>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li>
              <a href="https://github.com/Stuk/jszip">JSZip on Github</a>
            </li>
          </ul>
        </div>
      </div>
      
      <div class="row">
        <nav class="col-md-3">
        
        <h4>JSZip users :</h4>
        <ul class="nav">
              <li><a href="../index.html">Installation</a></li>
              <li><a href="../documentation/faq.html">FAQ</a></li>
              <li><a href="../CHANGES.html">Changelog</a></li>
              <li><a href="../documentation/upgrade_guide.html">Upgrade guide</a></li>
              <li><a href="https://github.com/Stuk/jszip/issues">Bug tracker</a></li>
        </ul>
        <h4>JSZip developers :</h4>
        <ul class="nav">
              <li><a href="../documentation/contributing.html">How to contribute</a></li>
              <li><a href="https://github.com/Stuk/jszip/graphs/contributors">Contributors</a></li>
        </ul>
        
        <!-- <ul class="nav"> -->
          <!-- <li><a href="../documentation/faq.html">FAQ</a></li> -->
        <!-- </ul> -->
          <!-- <li><a href="../index.html">installation</a></li> -->
          </nav>
        
        <div class="col-md-9">
          <h1>Upgrade Guide</h1>
          <!-- ===================== -->
          <!-- === C O N T E N T === -->
          <!-- ===================== -->

          <h3 id="from-2x-to-300">From 2.x to 3.0.0</h3>

<ul>
  <li>Deprecated objects/methods has been removed:
    <ul>
      <li><code class="language-plaintext highlighter-rouge">options.base64</code> in <code class="language-plaintext highlighter-rouge">generate()</code> (the base64 type is still valid)</li>
      <li><code class="language-plaintext highlighter-rouge">options.base64</code>, <code class="language-plaintext highlighter-rouge">options.binary</code>, <code class="language-plaintext highlighter-rouge">options.dir</code>, <code class="language-plaintext highlighter-rouge">options.date</code>
on <code class="language-plaintext highlighter-rouge">ZipObject</code> (see the <a href="#from-222-to-230">2.3 upgrade section</a>)</li>
      <li><code class="language-plaintext highlighter-rouge">JSZip.utils</code></li>
      <li><code class="language-plaintext highlighter-rouge">JSZip.prototype.crc32</code>, <code class="language-plaintext highlighter-rouge">JSZip.prototype.utf8encode</code>, <code class="language-plaintext highlighter-rouge">JSZip.prototype.utf8decode</code></li>
      <li><code class="language-plaintext highlighter-rouge">JSZip.base64</code> (you can get the content of a file directly as a base64 string)</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">JSZip.compressions</code> has been removed.</li>
  <li>On <code class="language-plaintext highlighter-rouge">ZipObject</code>, the synchronous getters has been replaced by <code class="language-plaintext highlighter-rouge">async()</code> and
<code class="language-plaintext highlighter-rouge">nodeStream()</code>.</li>
  <li>The <code class="language-plaintext highlighter-rouge">generate()</code> method has been replaced by <code class="language-plaintext highlighter-rouge">generateAsync()</code> and 
<code class="language-plaintext highlighter-rouge">generateNodeStream()</code>.</li>
  <li>The <code class="language-plaintext highlighter-rouge">type</code> option in <code class="language-plaintext highlighter-rouge">generate()</code> is now mandatory.</li>
  <li>The “text” type has been replaced by the “string” type, a binary string is
named “binarystring”.</li>
  <li>The <code class="language-plaintext highlighter-rouge">load()</code> method and the constructor with data (<code class="language-plaintext highlighter-rouge">new JSZip(data)</code>) have
been replaced by <code class="language-plaintext highlighter-rouge">loadAsync()</code>.</li>
  <li>When adding a file, the option <code class="language-plaintext highlighter-rouge">createFolders</code> now defaults to <code class="language-plaintext highlighter-rouge">true</code>. If
you don’t want to create sub folders, set it to false.</li>
  <li><code class="language-plaintext highlighter-rouge">zip.generateAsync()</code> and <code class="language-plaintext highlighter-rouge">zip.generateNodeStream()</code> now depend on the
current folder level.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 2.x</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">test.txt</span><span class="dl">"</span><span class="p">).</span><span class="nx">asText</span><span class="p">();</span>
<span class="c1">// 3.x</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">test.txt</span><span class="dl">"</span><span class="p">).</span><span class="k">async</span><span class="p">(</span><span class="dl">"</span><span class="s2">string</span><span class="dl">"</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// use content</span>
<span class="p">});</span>


<span class="c1">// 2.x</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">generate</span><span class="p">();</span>
<span class="c1">// 3.x</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">generateAsync</span><span class="p">({</span><span class="na">type</span><span class="p">:</span><span class="dl">"</span><span class="s2">uint8array</span><span class="dl">"</span><span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// use content</span>
<span class="p">});</span>

<span class="c1">// 2.x</span>
<span class="k">new</span> <span class="nx">JSZip</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">load</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="c1">// zip.file(...)</span>
<span class="c1">// 3.x</span>
<span class="nx">JSZip</span><span class="p">.</span><span class="nx">loadAsync</span><span class="p">(</span><span class="nx">data</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">zip</span><span class="p">)</span> <span class="p">{...};</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">loadAsync</span><span class="p">(</span><span class="nx">data</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">zip</span><span class="p">)</span> <span class="p">{...};</span>
<span class="c1">// here, zip won't have (yet) the updated content</span>

<span class="c1">// 2.x</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">img.jpg</span><span class="dl">"</span><span class="p">).</span><span class="nx">asBinary</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">dataURI</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">data:image/jpeg;base64,</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">JSZip</span><span class="p">.</span><span class="nx">base64</span><span class="p">.</span><span class="nx">encode</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="c1">// 3.x</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">img.jpg</span><span class="dl">"</span><span class="p">).</span><span class="k">async</span><span class="p">(</span><span class="dl">"</span><span class="s2">base64</span><span class="dl">"</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">data64</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">dataURI</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">data:image/jpeg;base64,</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">data64</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">async</code> and <code class="language-plaintext highlighter-rouge">loadAsync</code> use (a polyfill of) promises, you can find
the documentation <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">here</a>
and a tutorial <a href="http://www.html5rocks.com/en/tutorials/es6/promises/">here</a>.</p>

<p>It is worth noting that:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
 * JSZip accepts these promise as input
 */</span>

<span class="c1">// replace a content with JSZip v2</span>
<span class="kd">var</span> <span class="nx">content</span> <span class="o">=</span> <span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">my_file</span><span class="dl">"</span><span class="p">).</span><span class="nx">asText</span><span class="p">();</span>
<span class="nx">content</span> <span class="o">=</span> <span class="nx">content</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/apples/</span><span class="p">,</span> <span class="dl">'</span><span class="s1">oranges</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">my_file</span><span class="dl">"</span><span class="p">,</span> <span class="nx">content</span><span class="p">);</span>

<span class="c1">// replace a content with JSZip v3</span>
<span class="kd">var</span> <span class="nx">contentPromise</span> <span class="o">=</span> <span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">my_file</span><span class="dl">"</span><span class="p">).</span><span class="k">async</span><span class="p">(</span><span class="dl">"</span><span class="s2">text</span><span class="dl">"</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">content</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/apples/</span><span class="p">,</span> <span class="dl">'</span><span class="s1">oranges</span><span class="dl">'</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">my_file</span><span class="dl">"</span><span class="p">,</span> <span class="nx">contentPromise</span><span class="p">);</span>


<span class="cm">/*
 * Promises are chainable
 */</span>

<span class="c1">// read, update, generate a zip file with JSZip v2</span>
<span class="kd">var</span> <span class="nx">zip</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">JSZip</span><span class="p">(</span><span class="nx">content</span><span class="p">);</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">new_file</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">new_content</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">blob</span> <span class="o">=</span> <span class="nx">zip</span><span class="p">.</span><span class="nx">generate</span><span class="p">({</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">blob</span><span class="dl">"</span><span class="p">});</span>
<span class="nx">saveAs</span><span class="p">(</span><span class="nx">blob</span><span class="p">,</span> <span class="dl">"</span><span class="s2">result.zip</span><span class="dl">"</span><span class="p">);</span>

<span class="c1">// read, update, generate a zip file with JSZip v3</span>
<span class="nx">JSZip</span><span class="p">.</span><span class="nx">loadAsync</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">zip</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">new_file</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">new_content</span><span class="dl">"</span><span class="p">);</span>
    <span class="c1">// if you return the zip object, it will be available in the next "then"</span>
    <span class="k">return</span> <span class="nx">zip</span><span class="p">;</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">zip</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// if you return a promise of a blob, promises will "merge": the current</span>
    <span class="c1">// promise will wait for the other and the next "then" will get the</span>
    <span class="c1">// blob</span>
    <span class="k">return</span> <span class="nx">zip</span><span class="p">.</span><span class="nx">generateAsync</span><span class="p">({</span><span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">blob</span><span class="dl">"</span><span class="p">});</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">blob</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">saveAs</span><span class="p">(</span><span class="nx">blob</span><span class="p">,</span> <span class="dl">"</span><span class="s2">result.zip</span><span class="dl">"</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div>

<h3 id="from-222-to-230">From 2.2.2 to 2.3.0</h3>

<ul>
  <li>On <code class="language-plaintext highlighter-rouge">ZipObject#options</code>, the attributes <code class="language-plaintext highlighter-rouge">date</code> and <code class="language-plaintext highlighter-rouge">dir</code> have been
deprecated and are now on <code class="language-plaintext highlighter-rouge">ZipObject</code>.</li>
  <li>On <code class="language-plaintext highlighter-rouge">ZipObject#options</code>, the attributes <code class="language-plaintext highlighter-rouge">base64</code> and <code class="language-plaintext highlighter-rouge">binary</code> have been
deprecated.</li>
  <li><code class="language-plaintext highlighter-rouge">JSZip.base64</code>, <code class="language-plaintext highlighter-rouge">JSZip.prototype.crc32</code>, <code class="language-plaintext highlighter-rouge">JSZip.prototype.utf8decode</code>,
<code class="language-plaintext highlighter-rouge">JSZip.prototype.utf8encode</code> and <code class="language-plaintext highlighter-rouge">JSZip.utils</code> have been deprecated.</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// deprecated</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">test.txt</span><span class="dl">"</span><span class="p">).</span><span class="nx">options</span><span class="p">.</span><span class="nx">date</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">test.txt</span><span class="dl">"</span><span class="p">).</span><span class="nx">options</span><span class="p">.</span><span class="nx">dir</span>
<span class="c1">// new API</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">test.txt</span><span class="dl">"</span><span class="p">).</span><span class="nx">date</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">test.txt</span><span class="dl">"</span><span class="p">).</span><span class="nx">dir</span>
</code></pre></div></div>

<h3 id="from-200-to-210">From 2.0.0 to 2.1.0</h3>

<ul>
  <li>The packaging changed : instead of loading jszip.js, jszip-load.js,
jszip-inflate.js, jszip-deflate.js, just include dist/jszip.js or
dist/jszip.min.js.
For AMD loader users : JSZip now registers itself. You just have to put the
file at the right place or configure your loader.</li>
</ul>

<h3 id="from-1x-to-2x">From 1.x to 2.x</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">JSZipBase64</code> has been renamed to <code class="language-plaintext highlighter-rouge">JSZip.base64</code>.</li>
  <li>The <code class="language-plaintext highlighter-rouge">data</code> attribute doesn’t exist anymore :
use the getters <code class="language-plaintext highlighter-rouge">asText()</code>, <code class="language-plaintext highlighter-rouge">asBinary()</code>, etc</li>
  <li>The compression/decompression methods now give their input type with the
<code class="language-plaintext highlighter-rouge">compressInputType</code> and <code class="language-plaintext highlighter-rouge">uncompressInputType</code> attributes.</li>
</ul>

<p>Example for the data attribute :</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// before</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">test.txt</span><span class="dl">"</span><span class="p">).</span><span class="nx">data</span><span class="p">;</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="dl">"</span><span class="s2">test.txt</span><span class="dl">"</span><span class="p">].</span><span class="nx">data</span><span class="p">;</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">image.png</span><span class="dl">"</span><span class="p">).</span><span class="nx">data</span><span class="p">;</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="dl">"</span><span class="s2">image.png</span><span class="dl">"</span><span class="p">].</span><span class="nx">data</span><span class="p">;</span>

<span class="c1">// after</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">test.txt</span><span class="dl">"</span><span class="p">).</span><span class="nx">asText</span><span class="p">();</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="dl">"</span><span class="s2">test.txt</span><span class="dl">"</span><span class="p">].</span><span class="nx">asText</span><span class="p">();</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">file</span><span class="p">(</span><span class="dl">"</span><span class="s2">image.png</span><span class="dl">"</span><span class="p">).</span><span class="nx">asBinary</span><span class="p">();</span>
<span class="nx">zip</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="dl">"</span><span class="s2">image.png</span><span class="dl">"</span><span class="p">].</span><span class="nx">asBinary</span><span class="p">();</span>
</code></pre></div></div>


          <!-- ===================== -->
          <!-- == / C O N T E N T == -->
          <!-- ===================== -->
        </div>
      </div>
    </div>
    <script>
      // FIXME find how to do that cleanly
      (function(){
        var tables = document.getElementsByTagName("table");
        for(var i = 0; i < tables.length; i++) {
          tables[i].className += " table table-condensed table-striped table-bordered ";
        }
      })();
    </script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52085706-1', 'stuk.github.io');
      ga('send', 'pageview');

    </script>
  </body>
</html>
